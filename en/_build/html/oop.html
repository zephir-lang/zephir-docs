<!DOCTYPE html>

<html lang="en">
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Classes and Objects &mdash; Zephir 0.3.0 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:400,500,700,300italic,400italic,500italic&amp;subset=latin,cyrillic-ext' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="stylesheet" href="_static/docs.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Zephir 0.3.0 documentation" href="index.html" />
    <link rel="next" title="Built-In Methods" href="builtin-methods.html" />
    <link rel="prev" title="Arrays" href="arrays.html" /> 
  </head>
  <body>
    <div id="wrapper">
    <div class="related">
      <ul>
        <li class="right" >
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="builtin-methods.html" title="Built-In Methods"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="arrays.html" title="Arrays"
             accesskey="P">previous</a> |</li>
        <li><a href="http://zephir-lang.com">Home</a> &raquo;</li>
        <li><a href="index.html">Zephir 0.3.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

      <table width="90%" align="center">
        <tr>
      <td class="primary-box" width="20%" valign="top">
            <!--<div id="searchbox" style="">
                <form class="search" action="http://readthedocs.org/search/project/" method="get">
                  <input type="search" name="q" size="15" placeholder="Search">
                  <input type="submit" value="Go">
                  <input type="hidden" name="selected_facets" value="project:">
                </form>
            </div>-->
            <script>
            (function() {
              var cx = '009733439235723428699:zsbvcqcfzwa';
              var gcse = document.createElement('script');
              gcse.type = 'text/javascript';
              gcse.async = true;
              gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                  '//www.google.com/cse/cse.js?cx=' + cx;
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(gcse, s);
            })();
          </script>
          <gcse:search></gcse:search>
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Classes and Objects</a><ul>
<li><a class="reference internal" href="#classes">Classes</a></li>
<li><a class="reference internal" href="#implementing-methods">Implementing Methods</a><ul>
<li><a class="reference internal" href="#supported-visibilities">Supported Visibilities</a></li>
<li><a class="reference internal" href="#getter-setter-shortcuts">Getter/Setter shortcuts</a></li>
<li><a class="reference internal" href="#return-type-hints">Return Type Hints</a></li>
<li><a class="reference internal" href="#return-type-void">Return Type: Void</a></li>
<li><a class="reference internal" href="#strict-flexible-parameter-data-types">Strict/Flexible Parameter Data-Types</a></li>
<li><a class="reference internal" href="#read-only-parameters">Read-Only Parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#implementing-properties">Implementing Properties</a><ul>
<li><a class="reference internal" href="#updating-properties">Updating Properties</a></li>
<li><a class="reference internal" href="#reading-properties">Reading Properties</a></li>
</ul>
</li>
<li><a class="reference internal" href="#class-constants">Class Constants</a></li>
<li><a class="reference internal" href="#calling-methods">Calling Methods</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="arrays.html" title="previous chapter">&lt; Arrays</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="builtin-methods.html" title="next chapter">Built-In Methods &gt;</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/oop.txt" rel="nofollow">Show Source</a></li>
            </ul>
        </td>
          <td class="second-box" valign="top">
            <div class="document">
                <div class="documentwrapper">
                  <div class="bodywrapper">
                    <div class="body" >
                      
  <div class="section" id="classes-and-objects">
<h1>Classes and Objects<a class="headerlink" href="#classes-and-objects" title="Permalink to this headline">¶</a></h1>
<p>Zephir promotes object-oriented programming, this is why you can only export methods
and classes in extensions, also you will see that most of the time, runtime errors raise
exceptions instead of fatal errors or warnings.</p>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<p>Every Zephir file must implement a class or an interface (and just once). A class structure
is very similar to a PHP class:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Test</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * This is a sample class</span>
<span class="cm"> */</span>
<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="implementing-methods">
<h2>Implementing Methods<a class="headerlink" href="#implementing-methods" title="Permalink to this headline">¶</a></h2>
<p>The &#8220;function&#8221; keyword introduces a method. Methods implements the usual visibility modifiers available
in PHP, explicity set a visibility modifier is mandatory in Zephir:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Test</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">myPublicMethod</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="kr">protected</span> <span class="kd">function</span> <span class="nx">myProtectedMethod</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="kr">private</span> <span class="kd">function</span> <span class="nx">myPrivateMethod</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Methods can receive required and optional parameters:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Test</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>

    <span class="cm">/**</span>
<span class="cm">     * All parameters are required</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">doSum1</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Just &#39;a&#39; is required, &#39;b&#39; is optional and it has a default value</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">doSum2</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Both parameters are optional</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">doSum3</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Parameters are required and their values must be integer</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">doSum4</span><span class="p">(</span><span class="kr">int</span> <span class="nx">a</span><span class="p">,</span> <span class="kr">int</span> <span class="nx">b</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Static typed with default values</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">doSum4</span><span class="p">(</span><span class="kr">int</span> <span class="nx">a</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="kr">int</span> <span class="nx">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="supported-visibilities">
<h3>Supported Visibilities<a class="headerlink" href="#supported-visibilities" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Public: Methods marked as &#8220;public&#8221; are exported to the PHP extension, this means that public methods are visible to the PHP code as well to the extension itself.</li>
<li>Protected: Methods marked as &#8220;protected&#8221; are exported to the PHP extension, this means that protected methods are visible to the PHP code as well to the extension itself. However, protected methods can only be called in the scope of the class or in classes that inherit them.</li>
<li>Private: Methods marked as &#8220;private&#8221; are not exported to the PHP extension, this means that private methods are only visible to the class where they&#8217;re implemented.</li>
</ul>
</div>
<div class="section" id="getter-setter-shortcuts">
<h3>Getter/Setter shortcuts<a class="headerlink" href="#getter-setter-shortcuts" title="Permalink to this headline">¶</a></h3>
<p>Like in C#, you can use get/set/toString shortcuts in Zephir, this feature allows to easily write setters and getters for properties without explictly
implementing those methods as such.</p>
<p>For example, without shortcuts we could find code like:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Test</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>
    <span class="kr">protected</span> <span class="nx">myProperty</span><span class="p">;</span>

    <span class="kr">protected</span> <span class="nx">someProperty</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">setMyProperty</span><span class="p">(</span><span class="nx">myProperty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="nx">myProperty</span> <span class="o">=</span> <span class="nx">myProperty</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">getMyProperty</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="nx">myProperty</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">setSomeProperty</span><span class="p">(</span><span class="nx">someProperty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="nx">someProperty</span> <span class="o">=</span> <span class="nx">someProperty</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">getSomeProperty</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="nx">someProperty</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">__toString</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="nx">myProperty</span><span class="p">;</span>
    <span class="p">}</span>

 <span class="p">}</span>
</pre></div>
</div>
<p>You can write the same code using shortcuts as follows:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">App</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>
    <span class="kr">protected</span> <span class="nx">myProperty</span> <span class="p">{</span>
        <span class="nx">set</span><span class="p">,</span> <span class="nx">get</span><span class="p">,</span> <span class="nx">toString</span>
    <span class="p">};</span>

    <span class="kr">protected</span> <span class="nx">someProperty</span> <span class="o">=</span> <span class="mi">10</span> <span class="p">{</span>
        <span class="nx">set</span><span class="p">,</span> <span class="nx">get</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>When the code is compiled those methods are exported as real methods but you don’t have to write them one by one.</p>
</div>
<div class="section" id="return-type-hints">
<h3>Return Type Hints<a class="headerlink" href="#return-type-hints" title="Permalink to this headline">¶</a></h3>
<p>Methods in classes and interfaces can have return type hints, these will provide useful extra information to the compiler
to inform you about errors in your application. Consider the following example:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">App</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">getSomeData</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kr">string</span>
    <span class="p">{</span>
        <span class="c1">// this will throw a compiler exception</span>
        <span class="c1">// since the returned value (boolean) does not match</span>
        <span class="c1">// the expected returned type string</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">getSomeOther</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="o">&lt;</span><span class="nx">App\MyInterface</span><span class="o">&gt;</span>
    <span class="p">{</span>
        <span class="c1">// this will throw a compiler exception</span>
        <span class="c1">// if the returned object does not implement</span>
        <span class="c1">// the expected interface App\MyInterface</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">App\MyObject</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">process</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">myObject</span><span class="p">;</span>

        <span class="c1">// the type-hint will tell the compiler that</span>
        <span class="c1">// myObject is an instance of a class</span>
        <span class="c1">// that implement App\MyInterface</span>
        <span class="kd">let</span> <span class="nx">myObject</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="nx">getSomeOther</span><span class="p">();</span>

        <span class="c1">// the compiler will check if App\MyInterface</span>
        <span class="c1">// implements a method called &quot;someMethod&quot;</span>
        <span class="k">echo</span> <span class="nx">myObject</span><span class="o">-&gt;</span><span class="nx">someMethod</span><span class="p">();</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>A method can have more than one return type. When multiple types are defined, the operator | must be used to separate those types.</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">App</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">getSomeData</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kr">string</span><span class="o">|</span><span class="kr">bool</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="nx">a</span> <span class="o">==</span> <span class="kc">false</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="s2">&quot;error&quot;</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="return-type-void">
<h3>Return Type: Void<a class="headerlink" href="#return-type-void" title="Permalink to this headline">¶</a></h3>
<p>Methods can also be marked as ‘void’. This means that a method is not allowed to return any data:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="kr">public</span> <span class="kd">function</span> <span class="nx">setConnection</span><span class="p">(</span><span class="nx">connection</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">void</span>
<span class="p">{</span>
    <span class="kd">let</span> <span class="k">this</span><span class="o">-&gt;</span><span class="nx">_connection</span> <span class="o">=</span> <span class="nx">connection</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Why is this useful? Because the compiler can detect if the program is expecting a returning value from these methods and produce a compiler exception:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="kd">let</span> <span class="nx">myDb</span> <span class="o">=</span> <span class="nx">db</span><span class="o">-&gt;</span><span class="nx">setConnection</span><span class="p">(</span><span class="nx">connection</span><span class="p">);</span>
<span class="nx">myDb</span><span class="o">-&gt;</span><span class="nx">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM robots&quot;</span><span class="p">);</span> <span class="c1">// this will produce an exception</span>
</pre></div>
</div>
</div>
<div class="section" id="strict-flexible-parameter-data-types">
<h3>Strict/Flexible Parameter Data-Types<a class="headerlink" href="#strict-flexible-parameter-data-types" title="Permalink to this headline">¶</a></h3>
<p>In Zephir, you can specify the data type of each parameter of a method. By default, these data-types are flexible,
this means that if a value with wrong (but compatible) data-type is passed, Zephir will try to transparently
convert it to the expected one:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="kr">public</span> <span class="kd">function</span> <span class="nx">filterText</span><span class="p">(</span><span class="kr">string</span> <span class="nx">text</span><span class="p">,</span> <span class="kr">boolean</span> <span class="nx">escape</span><span class="o">=</span><span class="kc">false</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Above method will work with the following calls:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$o</span><span class="o">-&gt;</span><span class="na">filterText</span><span class="p">(</span><span class="mi">1111</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// OK</span>
<span class="nv">$o</span><span class="o">-&gt;</span><span class="na">filterText</span><span class="p">(</span><span class="s2">&quot;some text&quot;</span><span class="p">,</span> <span class="k">null</span><span class="p">);</span> <span class="c1">// OK</span>
<span class="nv">$o</span><span class="o">-&gt;</span><span class="na">filterText</span><span class="p">(</span><span class="k">null</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span> <span class="c1">// OK</span>
<span class="nv">$o</span><span class="o">-&gt;</span><span class="na">filterText</span><span class="p">(</span><span class="s2">&quot;some text&quot;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span> <span class="c1">// OK</span>
<span class="nv">$o</span><span class="o">-&gt;</span><span class="na">filterText</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="k">true</span><span class="p">);</span> <span class="c1">// FAIL</span>
</pre></div>
</div>
<p>However, passing a wrong type could be often lead to bugs, a bad use of a specific API would produce unexpected results.
You can disallow the automatic conversion by setting the parameter with a strict data-type:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="kr">public</span> <span class="kd">function</span> <span class="nx">filterText</span><span class="p">(</span><span class="kr">string</span><span class="o">!</span> <span class="nx">text</span><span class="p">,</span> <span class="kr">boolean</span> <span class="nx">escape</span><span class="o">=</span><span class="kc">false</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now, most of the calls with a wrong type will cause an exception due to the invalid data types passed:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$o</span><span class="o">-&gt;</span><span class="na">filterText</span><span class="p">(</span><span class="mi">1111</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// FAIL</span>
<span class="nv">$o</span><span class="o">-&gt;</span><span class="na">filterText</span><span class="p">(</span><span class="s2">&quot;some text&quot;</span><span class="p">,</span> <span class="k">null</span><span class="p">);</span> <span class="c1">// OK</span>
<span class="nv">$o</span><span class="o">-&gt;</span><span class="na">filterText</span><span class="p">(</span><span class="k">null</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span> <span class="c1">// FAIL</span>
<span class="nv">$o</span><span class="o">-&gt;</span><span class="na">filterText</span><span class="p">(</span><span class="s2">&quot;some text&quot;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span> <span class="c1">// OK</span>
<span class="nv">$o</span><span class="o">-&gt;</span><span class="na">filterText</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="k">true</span><span class="p">);</span> <span class="c1">// FAIL</span>
</pre></div>
</div>
<p>By specifying what parameters are strict and what must be flexible, a developer can set the specific behavior he/she really wants.</p>
</div>
<div class="section" id="read-only-parameters">
<h3>Read-Only Parameters<a class="headerlink" href="#read-only-parameters" title="Permalink to this headline">¶</a></h3>
<p>Using the keyword &#8216;const&#8217; you can mark parameters as read-only, this helps to respect <a class="reference external" href="http://en.wikipedia.org/wiki/Const-correctness">const-correctness</a>.
Parameters marked with this attribute can be modified inside the method:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">App</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>
    <span class="c1">// &quot;a&quot; is read-only</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">getSomeData</span><span class="p">(</span><span class="kr">const</span> <span class="kr">string</span> <span class="nx">a</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// this will throw a compiler exception</span>
        <span class="kd">let</span> <span class="nx">a</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When a parameter is read-only the compiler can make safe assumptions about further optimizations on these variables.</p>
</div>
</div>
<div class="section" id="implementing-properties">
<h2>Implementing Properties<a class="headerlink" href="#implementing-properties" title="Permalink to this headline">¶</a></h2>
<p>Class member variables are called &#8220;properties&#8221;. By default, they act as PHP properties.
Properties are exported to the PHP extension and are visibles from PHP code.
Properties implement the usual visibility modifiers available in PHP, explicity set
a visibility modifier is mandatory in Zephir:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Test</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>

    <span class="kr">public</span> <span class="nx">myProperty1</span><span class="p">;</span>

    <span class="kr">protected</span> <span class="nx">myProperty2</span><span class="p">;</span>

    <span class="kr">private</span> <span class="nx">myProperty3</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Within class methods non-static properties may be accessed by using -&gt; (Object Operator): this-&gt;property
(where property is the name of the property):</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Test</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>

    <span class="kr">protected</span> <span class="nx">myProperty</span><span class="p">;</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">setMyProperty</span><span class="p">(</span><span class="kd">var</span> <span class="nx">myProperty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">let</span> <span class="k">this</span><span class="o">-&gt;</span><span class="nx">myProperty</span> <span class="o">=</span> <span class="nx">myProperty</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">getMyProperty</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="nx">myProperty</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Properties can have literal compatible default values. These values must be able to be evaluated at
compile time and must not depend on run-time information in order to be evaluated:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Test</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>

    <span class="kr">protected</span> <span class="nx">myProperty1</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="kr">protected</span> <span class="nx">myProperty2</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="kr">protected</span> <span class="nx">myProperty3</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">;</span>
    <span class="kr">protected</span> <span class="nx">myProperty4</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
    <span class="kr">protected</span> <span class="nx">myProperty5</span> <span class="o">=</span> <span class="s2">&quot;my value&quot;</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="updating-properties">
<h3>Updating Properties<a class="headerlink" href="#updating-properties" title="Permalink to this headline">¶</a></h3>
<p>Properties can be updated by accesing them using the &#8216;-&gt;&#8217; operator:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="kd">let</span> <span class="k">this</span><span class="o">-&gt;</span><span class="nx">myProperty</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
</pre></div>
</div>
<p>Zephir checks that properties do exist when a program is accesing them, if a property is not declared you will get a compiler exception:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">CompilerException: Property &#39;_optionsx&#39; is not defined on class &#39;App\MyClass&#39; in /Users/scott/cphalcon/phalcon/cache/backend.zep on line 62</span>

<span class="x">      this-&gt;_optionsx = options;</span>
<span class="x">      ------------^</span>
</pre></div>
</div>
<p>If you want to avoid this compiler validation or just create a property dynamically, you can enclose the property name using string quotes:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="kd">let</span> <span class="k">this</span><span class="o">-&gt;</span><span class="p">{</span><span class="s2">&quot;myProperty&quot;</span><span class="p">}</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
</pre></div>
</div>
<p>You can also use a simple variable to update a property, the property name will be taken from the variable:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="kd">let</span> <span class="nx">someProperty</span> <span class="o">=</span> <span class="s2">&quot;myProperty&quot;</span><span class="p">;</span>
<span class="kd">let</span> <span class="k">this</span><span class="o">-&gt;</span><span class="p">{</span><span class="nx">someProperty</span><span class="p">}</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="reading-properties">
<h3>Reading Properties<a class="headerlink" href="#reading-properties" title="Permalink to this headline">¶</a></h3>
<p>Properties can be read by accesing them using the &#8216;-&gt;&#8217; operator:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">echo</span> <span class="k">this</span><span class="o">-&gt;</span><span class="nx">myProperty</span><span class="p">;</span>
</pre></div>
</div>
<p>As when updating, properties can be dynamically read this way:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="c1">//Avoid compiler check or read a dynamic user defined property</span>
<span class="k">echo</span> <span class="k">this</span><span class="o">-&gt;</span><span class="p">{</span><span class="s2">&quot;myProperty&quot;</span><span class="p">};</span>

<span class="c1">//Read using a variable name</span>
<span class="kd">let</span> <span class="nx">someProperty</span> <span class="o">=</span> <span class="s2">&quot;myProperty&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="k">this</span><span class="o">-&gt;</span><span class="p">{</span><span class="nx">someProperty</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="class-constants">
<h2>Class Constants<a class="headerlink" href="#class-constants" title="Permalink to this headline">¶</a></h2>
<p>Class may contain class constants that remain the same and unchangeable once the extension is compiled.
Class constants are exported to the PHP extension allowing them to be used from PHP.</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Test</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>

    <span class="kr">const</span> <span class="nx">MYCONSTANT1</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="kr">const</span> <span class="nx">MYCONSTANT2</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Class constants can be accessed using the class name and the static operator (::):</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Test</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>

    <span class="kr">const</span> <span class="nx">MYCONSTANT1</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="kr">const</span> <span class="nx">MYCONSTANT2</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">someMethod</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">MyClass</span><span class="o">::</span><span class="nx">MYCONSTANT1</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="calling-methods">
<h2>Calling Methods<a class="headerlink" href="#calling-methods" title="Permalink to this headline">¶</a></h2>
<p>Methods can be called using the object operator (-&gt;) as in PHP:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Test</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>

    <span class="kr">protected</span> <span class="kd">function</span> <span class="nx">_someHiddenMethod</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">someMethod</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="nx">_someHiddenMethod</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Static methods must be called using the static operator (::):</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Test</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>

    <span class="kr">protected</span> <span class="kr">static</span> <span class="kd">function</span> <span class="nx">_someHiddenMethod</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kr">public</span> <span class="kr">static</span> <span class="kd">function</span> <span class="nx">someMethod</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="kr">self</span><span class="o">::</span><span class="nx">_someHiddenMethod</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>You can call methods in a dynamic manner as follows:</p>
<div class="highlight-zephir"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Test</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">MyClass</span>
<span class="p">{</span>
    <span class="kr">protected</span> <span class="nx">adapter</span><span class="p">;</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">setAdapter</span><span class="p">(</span><span class="kd">var</span> <span class="nx">adapter</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">let</span> <span class="k">this</span><span class="o">-&gt;</span><span class="nx">adapter</span> <span class="o">=</span> <span class="nx">adapter</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">someMethod</span><span class="p">(</span><span class="kd">var</span> <span class="nx">methodName</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="nx">adapter</span><span class="o">-&gt;</span><span class="p">{</span><span class="nx">methodName</span><span class="p">}();</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


                    </div>
                  </div>
                </div>
            </div>
          </td>
        </tr>
      </table>
    <div class="related">
      <ul>
        <li class="right" >
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="builtin-methods.html" title="Built-In Methods"
             >next</a> |</li>
        <li class="right" >
          <a href="arrays.html" title="Arrays"
             >previous</a> |</li> 
      </ul>
    </div>
        <div id="footer">

          <p>Zephir Language is an open source project licensed under MIT license.</p>

          <p>Except where otherwise noted, content on this site is licensed under the
            <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License.</a></p>
             Last updated on Feb 06, 2014.
            Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.

          <p>
             &copy; Copyright 2013-2014, Zephir Team.
          </p>

        </div>

    </div>
  </body>
</html>